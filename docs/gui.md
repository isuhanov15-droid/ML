# ML.Gui кратко

- **Запуск**: `dotnet restore` затем `dotnet run --project ML.Gui`. Запускает Avalonia UI, по умолчанию подключенный к демо XOR пайплайну (см. `Views/MainWindow.axaml.cs`).
- **Архитектура**: тонкий UI поверх `ML.Core`. `TrainingViewModel` держит параметры, состояния и команды. `TrainingHost` оборачивает `Trainer`, отвечает за мягкую остановку и сохранение/загрузку моделей. Визуальное оформление держится в XAML (`Styles/Charts.axaml`, `Views/MainWindow.axaml`), а не во ViewModel. Демо-примеры и предустановки находятся в `ML.Core.Examples` (`ExampleRegistry`); Emotion удалён из GUI.
- **Состояния обучения**: `TrainingState` (Idle → Starting → Running → Stopping → Completed/Failed). `CanStart` разрешён только в Idle/Completed/Failed, `CanStop` — только в Running; кнопки/команды отключаются автоматически. Добавлен таймер обучения (`ElapsedText`), обновляемый через `DispatcherTimer`.
- **Stop-логика**: `TrainingHost` ставит флаг `_stopRequested` и сигналит через `CancellationToken`; `ManualStopCallback` останавливает тренер на безопасной точке (например, в конце эпохи). UI-коллекции/статусы обновляются через `Dispatcher.UIThread.Post`.
- **Датасеты/провайдеры**: пресеты (XOR/AND/порог/пользовательский CSV/JSON) регистрируются в `ML.Core.Examples.ExampleRegistry`. Для пользовательского датасета укажите путь (кнопка «…») — загрузка через `DatasetLoader.LoadClassification` (CSV: последние столбец — метка; JSON: массив объектов `{ x: [...], y: 0 }`).
- **Инференс**: вкладка «Мониторинг (инференс)» использует `InferenceViewModel` + `ML.Core.Inference.InferenceSession`. Можно загрузить модель, задать входной вектор и наблюдать выход и задержку в режиме мониторинга.
- **LiveCharts**: сейчас используется `LiveChartsCore.SkiaSharpView.Avalonia` версии `2.0.0-rc2`. В локальном кеше нет стабильной 2.x, сеть ограничена, поэтому RC сохранён. Для обновления при доступе к NuGet: `dotnet add ML.Gui package LiveChartsCore.SkiaSharpView.Avalonia -v 2.*`, затем `dotnet restore` и `dotnet build`.
